---
import { Menu, X } from "@lucide/astro";
---

<!-- --- NAVIGATION --- -->
<nav
    class="fixed top-0 w-full bg-white/95 backdrop-blur-sm border-b border-slate-100 z-50"
>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-20 items-center">
            <!-- Logo -->
            <div class="flex items-center gap-2">
                <a href="/">
                    <img src="/logo.webp" alt="Logo MPA" class="h-25 w-25" />
                </a>
                <div>
                    <!-- <span
                        class="text-xl font-bold tracking-tight text-slate-900"
                        >MPA</span
                    > -->
                    <span
                        class="hidden sm:inline-block ml-2 text-xs font-medium text-slate-500 border-l pl-2 border-slate-300"
                    >
                        Mi Propiedad Argentina
                    </span>
                </div>
            </div>

            <!-- Desktop Menu -->
            <div class="hidden md:flex items-center space-x-8">
                <a
                    href="#que-es"
                    class="text-sm font-medium text-slate-600 hover:text-blue-700 transition-colors"
                    >¿Qué es MPA?</a
                >
                <a
                    href="#beneficios"
                    class="text-sm font-medium text-slate-600 hover:text-blue-700 transition-colors"
                    >Beneficios</a
                >
                <a
                    href="#registro"
                    class="bg-slate-900 text-white px-5 py-2.5 rounded-full text-sm font-semibold hover:bg-slate-800 transition-all shadow-lg shadow-slate-900/20"
                >
                    Acceso Anticipado
                </a>
            </div>

            <!-- Mobile Menu Button -->
            <div class="md:hidden">
                <button id="mobile-menu-btn" class="text-slate-600 p-2">
                    <Menu id="menu-icon" class="w-7 h-7" />
                    <X id="close-icon" class="w-7 h-7 hidden" />
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Menu (Hidden by default) -->
    <div
        id="mobile-menu"
        class="hidden md:hidden bg-white border-b border-slate-100 absolute w-full left-0 top-20 shadow-lg"
    >
        <div class="px-4 pt-2 pb-6 space-y-2">
            <a
                href="#que-es"
                class="block py-3 text-base font-medium text-slate-600 border-b border-slate-50 mobile-link"
                >¿Qué es MPA?</a
            >
            <a
                href="#beneficios"
                class="block py-3 text-base font-medium text-slate-600 mobile-link"
                >Beneficios</a
            >
            <button
                onclick="scrollToForm(); toggleMenu()"
                class="w-full mt-4 bg-blue-700 text-white py-3 rounded-lg font-semibold"
            >
                Sumate al Pre-lanzamiento
            </button>
        </div>
    </div>
</nav>

<script>
    // 3. Mobile Menu Logic
    const mobileMenuBtn = document.getElementById("mobile-menu-btn");
    const mobileMenu = document.getElementById("mobile-menu");
    const menuIcon = document.getElementById("menu-icon");
    const closeIcon = document.getElementById("close-icon");
    const mobileLinks = document.querySelectorAll(".mobile-link");

    function toggleMenu() {
        const isHidden = mobileMenu!.classList.contains("hidden");

        if (isHidden) {
            mobileMenu!.classList.remove("hidden");
            menuIcon!.classList.add("hidden");
            closeIcon!.classList.remove("hidden");
        } else {
            mobileMenu!.classList.add("hidden");
            menuIcon!.classList.remove("hidden");
            closeIcon!.classList.add("hidden");
        }
    }

    mobileMenuBtn!.addEventListener("click", toggleMenu);

    // Close menu when clicking a link
    mobileLinks.forEach((link) => {
        link.addEventListener("click", toggleMenu);
    });

    // 4. Smooth Scroll function
    function scrollToForm() {
        document
            .getElementById("registro")!
            .scrollIntoView({ behavior: "smooth" });
    }
</script>
