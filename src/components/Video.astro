---
import { Lock } from "@lucide/astro";
---

<!-- --- VIDEO DEMO SECTION (NUEVA SECCIÓN) --- -->
<section class="py-20 bg-slate-900 text-white overflow-hidden">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <span
                class="text-blue-400 font-semibold tracking-wider uppercase text-sm"
                >Video demostrativo</span
            >
            <h2 class="text-3xl sm:text-4xl font-bold mt-2 mb-4">
                Descubre MPA en nuestro video
            </h2>
            <p class="text-slate-400 max-w-2xl mx-auto text-lg">
                Observa en este video cómo MPA puede transformar la gestión de
                tus propiedades de manera simple, rápida y eficiente.
            </p>
        </div>

        <div class="relative max-w-7xl mx-auto">
            <!-- Decorative blurred glow behind -->
            <div
                class="absolute -inset-1 bg-linear-to-tr from-blue-600 to-cyan-500 rounded-2xl blur opacity-30"
            >
            </div>

            <!-- Browser/App Window Frame -->
            <div
                class="relative bg-slate-800 rounded-2xl shadow-2xl border border-slate-700 overflow-hidden"
            >
                <!-- Window Header -->
                <div
                    class="bg-slate-900/90 backdrop-blur px-2 py-2 sm:px-4 sm:py-3 flex items-center gap-2 sm:gap-4 border-b border-slate-700/50"
                >
                    <div class="flex gap-1 sm:gap-2">
                        <div
                            class="w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-red-500/80"
                        >
                        </div>
                        <div
                            class="w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-yellow-500/80"
                        >
                        </div>
                        <div
                            class="w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-green-500/80"
                        >
                        </div>
                    </div>
                    <!-- Fake URL bar -->
                    <div
                        class="flex-1 max-w-30 sm:max-w-xs bg-slate-800 rounded-md py-0.5 px-2 sm:py-1 sm:px-3 text-[10px] sm:text-xs text-slate-500 font-mono flex items-center gap-1 sm:gap-2"
                    >
                        <Lock size={10} class="sm:w-3 sm:h-3 w-2 h-2" />
                        https://mipropiedadargentina.com.ar/dashboard
                    </div>
                </div>

                <!-- Video Container -->
                <div class="aspect-video bg-slate-950 relative group">
                    <button
                        id="customPlayBtn"
                        type="button"
                        class="absolute inset-0 flex items-center justify-center z-10 transition-opacity duration-200 bg-black/40 hover:bg-black/60"
                        style="font-size:3rem;"
                        aria-label="Reproducir video"
                    >
                        ▶
                    </button>
                    <video
                        id="demoVideo"
                        class="w-full h-full object-contain"
                        poster="/logo.webp"
                        playsinline
                        preload="none"
                        style="z-index:1"
                        controls
                    >
                        <source src="/demo.webm" type="video/webm" />
                        Tu navegador no soporta la reproducción de video.
                    </video>
                    <script type="text/javascript" is:inline>
                        // Detecta iOS
                        function isIOS() {
                            return (
                                /iPad|iPhone|iPod/.test(navigator.userAgent) &&
                                !window.MSStream
                            );
                        }
                        const btn = document.getElementById("customPlayBtn");
                        const video = document.getElementById("demoVideo");
                        if (isIOS()) {
                            btn.style.display = "none";
                            video.setAttribute("controls", "controls");
                        } else {
                            btn.addEventListener("click", () => {
                                btn.style.display = "none";
                                video.setAttribute("controls", "controls");
                                video.play();
                            });
                            video.addEventListener("pause", () => {
                                if (video.currentTime === 0 || video.ended) {
                                    btn.style.display = "";
                                    video.removeAttribute("controls");
                                }
                            });
                        }
                    </script>
                </div>
            </div>
        </div>
    </div>
</section>
